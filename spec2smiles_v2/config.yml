# SPEC2SMILES Pipeline Configuration

# Paths
paths:
  data_input: data/input
  data_output: data/output

# Dataset
dataset: hpj

# Device: cuda, mps, cpu, auto
device: auto

# Spectrum Processing
spectrum:
  n_bins: 500
  bin_width: 1.0
  max_mz: 500.0
  transform: sqrt  # sqrt, log, none
  normalize: true

# Molecular Descriptors (30 for 100% uniqueness on HPJ dataset)
# Original 12 descriptors had only 88.9% uniqueness
descriptors:
  # Original 12 descriptors
  - MolWt
  - HeavyAtomCount
  - NumHeteroatoms
  - NumAromaticRings
  - RingCount
  - NOCount
  - NumHDonors
  - NumHAcceptors
  - TPSA
  - MolLogP
  - NumRotatableBonds
  - FractionCSP3
  # Extended descriptors for uniqueness (18 additional)
  - ExactMolWt
  - NumAliphaticRings
  - NumSaturatedRings
  - NumAromaticHeterocycles
  - NumAromaticCarbocycles
  - NumAliphaticHeterocycles
  - NumAliphaticCarbocycles
  - NumSaturatedHeterocycles
  - NumSaturatedCarbocycles
  - LabuteASA
  - BalabanJ
  - BertzCT
  - Chi0
  - Chi1
  - Chi2n
  - Chi3n
  - Chi4n
  - HallKierAlpha

# Part A: Spectrum -> Descriptors (Hybrid CNN-Transformer)
# Larger model to match spec2smiles_pkg performance
part_a:
  cnn_hidden: 512           # CNN feature dimension (was 256)
  transformer_dim: 512      # Transformer model dimension (was 256)
  n_heads: 8                # Attention heads
  n_transformer_layers: 6   # Transformer encoder layers (was 4)
  d_ff: 2048                # Feedforward dimension (was 1024)
  dropout: 0.1
  learning_rate: 0.0003     # Higher LR with OneCycleLR
  weight_decay: 0.01
  max_epochs: 300
  batch_size: 64            # Larger batch (was 32)
  gradient_clip: 1.0
  patience: 50              # Longer patience (was 40)

# Part B: Descriptors -> SMILES
part_b:
  model: vae

  vae:
    latent_dim: 128
    hidden_dim: 256
    n_layers: 2
    dropout: 0.2
    max_seq_len: 100
    learning_rate: 0.001
    n_epochs: 100
    batch_size: 64
    kl_cycle_length: 20
    gradient_clip: 1.0

# Inference
inference:
  n_candidates: 50
  temperature: 0.7
  top_p: 0.9

# Data Split
split:
  train: 0.8
  val: 0.1
  test: 0.1
  seed: 42
