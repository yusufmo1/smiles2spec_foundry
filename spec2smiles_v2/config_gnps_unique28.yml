# SPEC2SMILES Pipeline - GNPS with 28 UNIQUE descriptors (high R², low correlation)
# Selected via correlation-based clustering to maximize diversity

paths:
  data_input: data/input
  data_output: data/output

dataset: gnps
device: auto

spectrum:
  n_bins: 500
  bin_width: 1.0
  max_mz: 500.0
  transform: sqrt
  normalize: true

# 28 unique descriptors with R² >= 0.4 and low inter-correlation
# Each represents a distinct cluster of correlated descriptors
descriptors:
  - fr_phos_ester      # 0.723 - phosphate ester count
  - Chi3n              # 0.718 - represents 16+ Chi/size descriptors
  - Chi2n              # 0.714 - molecular connectivity
  - NumAtomStereoCenters  # 0.698 - stereochemistry
  - SMR_VSA1           # 0.673 - molar refractivity surface
  - SMR_VSA4           # 0.672 - molar refractivity surface
  - NumSaturatedCarbocycles  # 0.669 - ring count
  - SMR_VSA5           # 0.668 - molar refractivity surface
  - EState_VSA10       # 0.651 - electrotopological state
  - PEOE_VSA7          # 0.642 - partial charge surface
  - NumSaturatedRings  # 0.638 - saturation
  - fr_Al_OH           # 0.599 - aliphatic hydroxyl
  - VSA_EState3        # 0.590 - VSA electrotopological
  - PEOE_VSA10         # 0.586 - partial charge surface
  - SPS                # 0.575 - sum of path scores
  - fr_ether           # 0.571 - ether count
  - SMR_VSA3           # 0.561 - molar refractivity surface
  - qed                # 0.550 - drug-likeness
  - SlogP_VSA5         # 0.545 - logP surface
  - AvgIpc             # 0.538 - information content
  - FractionCSP3       # 0.533 - sp3 carbon fraction
  - SlogP_VSA3         # 0.519 - logP surface
  - Kappa2             # 0.512 - shape index
  - RingCount          # 0.510 - total rings
  - SlogP_VSA11        # 0.493 - logP surface
  - VSA_EState2        # 0.476 - VSA electrotopological
  - HallKierAlpha      # 0.445 - alpha shape descriptor
  - NumAromaticRings   # 0.400 - aromaticity

# Light model architecture
part_a:
  cnn_hidden: 128
  transformer_dim: 128
  n_heads: 4
  n_transformer_layers: 2
  d_ff: 256
  dropout: 0.2
  learning_rate: 0.0005
  weight_decay: 0.01
  max_epochs: 200
  batch_size: 2048
  gradient_clip: 1.0
  patience: 30

# Part B: DirectDecoder (Large model ~57M params)
part_b:
  model: direct
  direct:
    hidden_dim: 768
    n_layers: 6
    n_heads: 12
    dropout: 0.1
    max_seq_len: 100
    learning_rate: 0.0003
    n_epochs: 200
    batch_size: 64
    label_smoothing: 0.1
    gradient_clip: 1.0
    patience: 30

inference:
  n_candidates: 50
  temperature: 0.7
  top_p: 0.9

split:
  train: 0.8
  val: 0.1
  test: 0.1
  seed: 42
